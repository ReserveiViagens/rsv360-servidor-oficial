version: '3.8'

services:
  dashboard-rsv:
    image: node:18-alpine
    container_name: rsv-dashboard-rsv
    restart: unless-stopped
    ports:
      - '3003:3003'
    volumes:
      - ./dashboard-rsv:/app
    working_dir: /app
    command: >
      sh -c "
        npm install express &&
        node server.js
      "
    environment:
      - NODE_ENV=production
      - PORT=3003
    healthcheck:
      test: ['CMD', 'wget', '--no-verbose', '--tries=1', '--spider', 'http://localhost:3003/health']
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s
    networks:
      - rsv360-network

networks:
  rsv360-network:
    external: true
