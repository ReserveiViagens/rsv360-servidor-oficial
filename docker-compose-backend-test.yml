version: '3.8'
services:
  backend-5000:
    image: node:18-alpine
    container_name: rsv-backend-5000
    ports:
      - "5000:5000"
    environment:
      - NODE_ENV=development
      - PORT=5000
    command: >
      sh -c "
        apk add --no-cache curl &&
        mkdir -p /app && cd /app &&
        echo 'const express = require(\"express\");
        const app = express();
        const port = 5000;
        app.use(express.json());
        app.get(\"/health\", (req, res) => {
          res.json({status: \"healthy\", service: \"Backend 5000\", timestamp: new Date().toISOString()});
        });
        app.listen(port, () => console.log(\"Backend 5000 running\"));
        ' > server.js &&
        npm init -y && npm install express && node server.js
      "
    restart: unless-stopped
